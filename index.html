<script>
  const msgEl = document.getElementById("msg");
  const btn = document.getElementById("btn");

  // Fallback por si falla la red
  let messages = ["Mamá te quiero","Papá te quiero","Nadia eres una gran médico","Soy el mejor"];

  async function loadMessages() {
    try {
      const res = await fetch("./messages.json", { cache: "no-store" });
      if (!res.ok) throw new Error("HTTP " + res.status);
      const data = await res.json();
      if (Array.isArray(data) && data.length) messages = data;
    } catch (e) {
      // seguimos con el fallback
      console.warn("No se pudieron cargar las frases más recientes:", e);
    }
  }

  btn.addEventListener("click", () => {
    msgEl.textContent = messages[Math.floor(Math.random() * messages.length)];
  });

  // Carga inicial de frases
  loadMessages();

  // (Opcional) recarga frases cada X minutos por si dejas la pestaña abierta
  // setInterval(loadMessages, 5 * 60 * 1000);

  // Registro del SW (ajusta la ruta si es Project Pages)
  if ("serviceWorker" in navigator) {
    navigator.serviceWorker.register("./service-worker.js").then(reg => {
      reg.update().catch(()=>{});
    }).catch(console.error);
  }
</script>



